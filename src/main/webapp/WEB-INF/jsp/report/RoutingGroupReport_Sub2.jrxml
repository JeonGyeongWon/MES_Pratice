<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="RoutingGroupReport_Sub2" language="groovy" pageWidth="850" pageHeight="900" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="850" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isSummaryWithPageHeaderAndFooter="true" uuid="c1e98407-d3cc-429b-aa26-11840991f19f">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="ORGID" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="COMPANYID" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="SEARCHDATE" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT RANK() OVER(ORDER BY SC.ORG_ID, SC.COMPANY_ID, SC.SMALL_CODE) AS RN
              ,SC.ORG_ID AS ORGID
              ,SC.COMPANY_ID AS COMPANYID
              ,TMP.SEARCH_DATE AS SEARCHDATE
              ,SC.SMALL_CODE AS ROUTINGGROUP
              ,SC.SMALL_NAME AS ROUTINGGROUPNAME
              ,CB_REPORT_PKG.CB_ROUTING_GROUP_FIND(SC.ORG_ID
                                                  ,SC.COMPANY_ID
                                                  ,TMP.SEARCH_DATE
                                                  ,RANK() OVER(ORDER BY SC.ORG_ID, SC.COMPANY_ID, SC.SMALL_CODE)) AS QTY
      FROM CB_SMALL_CODE SC
          ,(SELECT $P{ORGID} AS ORG_ID
                  ,$P{COMPANYID} AS COMPANY_ID
                  ,$P{SEARCHDATE} AS SEARCH_DATE
              FROM DUAL) TMP
     WHERE 1=1
       AND SC.ORG_ID = TMP.ORG_ID
       AND SC.COMPANY_ID = TMP.COMPANY_ID
       AND SC.BIG_CODE = 'MFG'
       AND SC.MIDDLE_CODE = 'ROUTING_GROUP'
       AND SC.USE_YN = 'Y'
     ORDER BY SC.ORG_ID, SC.COMPANY_ID, SC.SMALL_CODE]]>
	</queryString>
	<field name="RN" class="java.math.BigDecimal"/>
	<field name="ORGID" class="java.math.BigDecimal"/>
	<field name="COMPANYID" class="java.math.BigDecimal"/>
	<field name="SEARCHDATE" class="java.lang.String"/>
	<field name="ROUTINGGROUP" class="java.lang.String"/>
	<field name="ROUTINGGROUPNAME" class="java.lang.String"/>
	<field name="QTY" class="java.math.BigDecimal"/>
	<summary>
		<band height="900" splitType="Stretch">
			<pie3DChart>
				<chart>
					<reportElement x="0" y="0" width="850" height="900" uuid="c4e05676-02a7-4bb3-a323-11814c18c58a"/>
					<box>
						<topPen lineWidth="3.0"/>
						<leftPen lineWidth="3.0"/>
						<bottomPen lineWidth="3.0"/>
						<rightPen lineWidth="3.0"/>
					</box>
					<chartTitle>
						<font fontName="맑은 고딕" size="10" isBold="true" pdfFontName="malgunbd.ttf" pdfEncoding="Identity-H"/>
					</chartTitle>
					<chartSubtitle>
						<font fontName="맑은 고딕" size="10" pdfFontName="malgun.ttf" pdfEncoding="Identity-H"/>
					</chartSubtitle>
					<chartLegend position="Right">
						<font fontName="맑은 고딕" size="24" pdfFontName="malgun.ttf" pdfEncoding="Identity-H"/>
					</chartLegend>
				</chart>
				<pieDataset>
					<keyExpression><![CDATA[$F{ROUTINGGROUPNAME}]]></keyExpression>
					<valueExpression><![CDATA[$F{QTY}]]></valueExpression>
				</pieDataset>
				<pie3DPlot isShowLabels="false" isCircular="true">
					<plot/>
					<itemLabel>
						<font fontName="맑은 고딕" size="10" pdfFontName="malgun.ttf" pdfEncoding="Identity-H"/>
					</itemLabel>
				</pie3DPlot>
			</pie3DChart>
		</band>
	</summary>
</jasperReport>
