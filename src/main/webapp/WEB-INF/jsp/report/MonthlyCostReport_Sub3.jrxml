<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="MonthlyCostReport_Sub3" language="groovy" pageWidth="850" pageHeight="390" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="850" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="ec2ac8c6-b707-4d30-9988-2e77d7203bd1">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="ORGID" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="COMPANYID" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="SEARCHYEAR" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT TMP.ORGID AS ORGID,
       TMP.COMPANYID AS COMPANYID,
       '년도별 매출 실적' AS TITLE,
       TO_CHAR(TO_NUMBER(TMP.SEARCHYEAR,'9999') - TMP.SEARCHNUM) || '년' AS SEARCHYEAR,
       NVL(CB_COST_PKG.CB_COST_AMOUNT_FIND(TMP.ORGID
                                          ,TMP.COMPANYID
                                          ,NULL
                                          ,TO_CHAR(TO_NUMBER(TMP.SEARCHYEAR,'9999') - TMP.SEARCHNUM)
                                          ,NULL
                                          ,'TOTAL'), 0) AS TOTALYEAR
  FROM (SELECT $P{ORGID} AS ORGID
              ,$P{COMPANYID} AS COMPANYID
              ,$P{SEARCHYEAR} AS SEARCHYEAR
              ,LEVEL - 1 AS SEARCHNUM
          FROM DUAL
        CONNECT BY LEVEL <= 3) TMP
 WHERE 1 = 1
   AND NVL(CB_COST_PKG.CB_COST_AMOUNT_FIND(TMP.ORGID
                                          ,TMP.COMPANYID
                                          ,NULL
                                          ,TMP.SEARCHYEAR
                                          ,NULL
                                          ,'TOTAL'), 0) > 0
 ORDER BY SEARCHYEAR]]>
	</queryString>
	<field name="ORGID" class="java.lang.String"/>
	<field name="COMPANYID" class="java.lang.String"/>
	<field name="TITLE" class="java.lang.String"/>
	<field name="SEARCHYEAR" class="java.lang.String"/>
	<field name="TOTALYEAR" class="java.math.BigDecimal"/>
	<summary>
		<band height="390" splitType="Stretch">
			<lineChart>
				<chart isShowLegend="false">
					<reportElement x="0" y="0" width="850" height="390" uuid="7a56a8cb-3703-4c0d-a293-4bad4658192f"/>
					<box>
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<chartTitle position="Top" color="#004CDD">
						<font fontName="맑은 고딕" size="14" isBold="true" pdfFontName="malgunbd.ttf" pdfEncoding="Identity-H"/>
						<titleExpression><![CDATA[$F{TITLE}]]></titleExpression>
					</chartTitle>
					<chartSubtitle>
						<font fontName="맑은 고딕" size="10" isItalic="false" pdfFontName="malgun.ttf" pdfEncoding="Identity-H"/>
					</chartSubtitle>
					<chartLegend>
						<font fontName="맑은 고딕" size="10" pdfFontName="malgun.ttf" pdfEncoding="Identity-H"/>
					</chartLegend>
				</chart>
				<categoryDataset>
					<categorySeries>
						<seriesExpression><![CDATA[$F{TITLE}]]></seriesExpression>
						<categoryExpression><![CDATA[$F{SEARCHYEAR}]]></categoryExpression>
						<valueExpression><![CDATA[$F{TOTALYEAR}]]></valueExpression>
					</categorySeries>
				</categoryDataset>
				<linePlot>
					<plot/>
					<categoryAxisFormat>
						<axisFormat>
							<labelFont>
								<font fontName="맑은 고딕" size="10" pdfFontName="malgun.ttf" pdfEncoding="Identity-H"/>
							</labelFont>
							<tickLabelFont>
								<font fontName="맑은 고딕" size="10" pdfEncoding="Identity-H"/>
							</tickLabelFont>
						</axisFormat>
					</categoryAxisFormat>
					<valueAxisFormat>
						<axisFormat>
							<labelFont>
								<font fontName="맑은 고딕" pdfFontName="malgun.ttf" pdfEncoding="Identity-H"/>
							</labelFont>
							<tickLabelFont>
								<font fontName="맑은 고딕" pdfFontName="malgun.ttf" pdfEncoding="Identity-H"/>
							</tickLabelFont>
						</axisFormat>
					</valueAxisFormat>
				</linePlot>
			</lineChart>
		</band>
	</summary>
</jasperReport>
